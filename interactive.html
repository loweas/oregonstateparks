<!DOCTYPE html>
<html lang="en">
<head>
    <title>State Parks</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--add required stylesheets-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
  <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="img/download.ico" type="image/x-icon">

    <!--Icons-->
    <link href="https://fonts.googleapis.com/css?family=Cairo" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="dist/storymap.2.4.css">
    <!--add required libraries-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <script src="https://cdn.bootcss.com/chroma-js/1.3.3/chroma.min.js"></script>

    <!--story map plugin-->
    <script src="dist/storymap.2.4.js"></script>


    <style>



    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <!--story map plugin-->
    <script src="dist/storymap.2.4.js"></script>



    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">

  </head>
  <style>
  .social {
      position:fixed;
      cursor: pointer;
      font-size:24px;
      color:darkgray;
      z-index:1003;
      top: 1%;
      left:2px;
  }
  .social2 {
      position:fixed;
      cursor: pointer;
      font-size:24px;
      color:darkgray;
      z-index:1003;
      top: 1%;
      left:30px;
  }
  .social:hover {
      color: darkblue;
      text-decoration: none;
  }


  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: Arial;
    font-size: 17px;
  }

  #myVideo {
    position: fixed;
    right: 0;
    bottom: 0;
    min-width: 100%;
    min-height: 100%;
  }

  .content {
    position: fixed;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    color: #f1f1f1;
    width: 100%;
    padding: 20px;
  }

  #myBtn {
    width: 200px;
    font-size: 18px;
    padding: 10px;
    border: none;
    background: #000;
    color: #fff;
    cursor: pointer;
  }

  #myBtn:hover {
    background: #ddd;
    color: black;
  }


  </style>
  <body>

    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" href="#page-top">Oregon State Parks and Social Media</a>
        <button class="navbar-toggler navbar-toggler-Left" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html#projects">Projects</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="interactive.html">Iteractive Map</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html#signup">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>


<div id="storymap" class="container-fluid" style="margin-top:10px">>

    <div class="row">
        <div class="col-sm-4 col-sm-4 storymap-story">
            <section data-scene="scene1" >
              <h2>Oregon State Parks</h2>
              <h4>Park Artivities</h4>
                <p>Visitation patterns throughout the last 16 years.</p>
              </section>
            <section data-scene="scene2"><h2>Primary Activity </h2>
              <p><!-- InstaWidget -->
<a href="https://instawidget.net/v/tag/smithrockstatepark" id="link-559fbe084ce2c40e4a4e7dde9f3b2cd0965de710ba9440a9805897a519b0564f">#smithrockstatepark</a>
<script src="https://instawidget.net/js/instawidget.js?u=559fbe084ce2c40e4a4e7dde9f3b2cd0965de710ba9440a9805897a519b0564f&width=300px"></script></p>
              <p>All other drifts would be considered double drifts………. $25.00 </p>
              <p>Logsden Store DOES NOT collect money for the shuttles.</p>
            </section>
            <section data-scene="scene3" data-background="assets/output.mp4">
              <div class="fullscreen text-center">

              <h2></br> </br> </br> </br> </br> </br>Vistation Increase Waves</h2></section>
              </div>
        </div>
        <div class="col-sm-6 col-md-4 storymap-map"></div>
    </div>
</div>
<script type="text/javascript">
var parks = L.geoJson.ajax('assets/timeseries.geojson',
    {

        onEachFeature: function (feature, layer) {
            layer.bindTooltip(feature.properties.Location, {
                className: 'feature-label',
                permanent: false,
                direction: 'center'
            });
        }
    });

var colors = chroma.scale('Dark2').mode('lch').colors(10);
for (i = 1; i < 11; i++) {
    $('html > head').append($("<style> .marker-icon-" + i.toString() + " { color: " + colors[i] + "; font-size: 15px; text-shadow: 0 0 3px #ffffff;} </style>"));
}

    var parks_color = L.geoJson.ajax('assets/timeseries.geojson', {
      pointToLayer: function (feature, latlng) {
      if (feature.properties.Camping == "1"){
      return L.marker(latlng, {icon: L.divIcon({className: 'fas fa-campground marker-icon-3' })});
    }else if (feature.properties.BeachAccess == "1") {
                return L.marker(latlng, {icon: L.divIcon({className: 'fas fa-umbrella-beach marker-icon-5'})});
            } else if (feature.properties.Hiking == "1") {
                        return L.marker(latlng, {icon: L.divIcon({className: 'fas fa-hiking marker-icon-1'})});
                    }
            else if (feature.properties.Fishing == "1") {
                return L.marker(latlng, {icon: L.divIcon({className: 'fas fa-fish marker-icon-4'})});
            } else if (feature.properties.Swimming == "1") {
                return L.marker(latlng, {icon: L.divIcon({className: 'fas fa-swim marker-icon-6'})});
            } else {
                return L.marker(latlng, {icon: L.divIcon({className: 'fas fa-tree marker-icon-8'})});
            }
        },
            onEachFeature: function (feature, layer) {
                layer.bindTooltip(feature.properties.Location + "</br>"+feature.properties.hashtag, {sticky: true, className: "feature-tooltip"});
            }
    });

  // determine the style class based on the input feature this is the count of parks within region


    var regionalcounts = L.geoJson.ajax('assets/regionalcounts.json',
        {   onEachFeature: function (feature, layer) {
              layer.bindTooltip(feature.properties.LEVEL3_NAM + "</br> Number of Parks : "+feature.properties.COUNTS, {sticky: true, className: "feature-tooltip"});

          }

        });

        var parks_coast = L.geoJson.ajax('assets/timeseries.geojson', {
          pointToLayer: function (feature, latlng) {
          if (feature.properties.Location == "Yaquina Bay State Recreation Site"){
          return L.marker(latlng, {icon: L.divIcon({ html: '<i class="fas fa-umbrella-beach fa-2x"></i>', className: 'marker-icon-5' })});
        }else if (feature.properties.Location == "Harris Beach State Park") {
                    return L.marker(latlng, {icon: L.divIcon({html: '<i class="fas fa-campground fa-2x"></i>', className: 'marker-icon-3'})});
                } else if (feature.properties.Location == "Sunset Bay State Park") {
                            return L.marker(latlng, {icon: L.divIcon({html: '<i class="fas fa-umbrella-beach fa-2x"></i>',className: ' marker-icon-5'})});
                        }
                else if (feature.properties.Location == "D River State Recreation Site") {
                    return L.marker(latlng, {icon: L.divIcon({html: '<i class="fas fa-umbrella-beach fa-2x"></i>',className: 'marker-icon-5'})});
                } else if (feature.properties.Location == "Oswald West State Park") {
                    return L.marker(latlng, {icon: L.divIcon({html: '<i class="fas fa-hiking fa-2x"></i>',className: 'marker-icon-1'})});
                } else if (feature.properties.Location == "Tolovana Beach State Recreation Site") {
                    return L.marker(latlng, {icon: L.divIcon({html: '<i class="fas fa-umbrella-beach fa-2x"></i>',className: 'marker-icon-5'})});
                } else if (feature.properties.Location == "Fort Stevens State Park") {
                    return L.marker(latlng, {icon: L.divIcon({html: '<i class="fas fa-campground fa-2x"></i>', className: 'marker-icon-2'})});
                }
                else if (feature.properties.Location == "Heceta Head Lighthouse State Scenic Viewpoint") {
                    return L.marker(latlng, {icon: L.divIcon({html: '<i class="fas fa-hiking fa-2x"></i>',className: 'marker-icon-1'})});
                }
            },
                onEachFeature: function (feature, layer) {
                    layer.bindPopup(feature.properties.Location + "</br>"+feature.properties.hashtag, {sticky: true, className: "feature-tooltip"});
                }
        });




var outdoorLayer = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamFrb2J6aGFvIiwiYSI6ImNpcms2YWsyMzAwMmtmbG5icTFxZ3ZkdncifQ.P9MBej1xacybKcDN_jehvw', {
            id: 'mapbox.outdoors', detectRetina: true
        });
        var layers = {
            parks:{layer: parks},
            parks_color: {layer: parks_color},
            regionalcounts: {layer: regionalcounts},
            outdoorLayer: {layer: outdoorLayer},
            parks_coast: {layer: parks_coast}

        };



    var scenes = {
        scene1: {lat: 44, lng: -123., zoom: 6.5, name: 'scene1',layers: [layers.outdoorLayer, layers.parks_color, layers.regionalcounts]},
        scene2: {lat: 44.5, lng: -125.5, zoom: 7, name: 'Scene2', layers: [layers.outdoorLayer, layers.parks_coast]},
        scene3: {lat: 44, lng: -1.5, zoom: 8, name: 'towers', layers: [layers.outdoorLayer]},
        scene5: {lat: 44, lng: -123.5, zoom: 7, name: 'tower circles', layers: [layers.outdoorLayer, layers.towers_circle]},
        scene6: {lat: 44, lng: -123.5, zoom: 7, name: 'tower circles', layers: [layers.towers_circle2, layers.darkLayer]}
    };


    $('#storymap').storymap({
        scenes: scenes,

        legend: true, // if you do not want a legend feature, you can simply not define the createLegend function.
        scalebar: false,
        loader: false,
        navwidget: true,
        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
            var map = L.map($(".storymap-map")[0], {zoomControl: false, scrollWheelZoom: false});

            // add an base map, which can be either OSM, mapbox, tilelayer, wmslayer or those designed by yourself.

            return map;
        }
    });
</script>
</body>
</html>
